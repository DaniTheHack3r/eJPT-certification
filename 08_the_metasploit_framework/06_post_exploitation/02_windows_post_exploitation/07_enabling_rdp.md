# Enabling RDP

+ The Remote Desktop Protocol (RDP) is a proprietary GUI remote access protocol developed by Microsoft and is used to remotely connect and interact with a Windows system.

+ RDP uses TCP port 3389 by default.

+ RDP is disabled by default, however, we can utilize an MSF exploit module to enable RDP on the Windows target and consequently utilize RDP to remotely access to the target system.

+ RDP authentication requires a legitimate user account on the target system as well as the userâ€™s password in clear-text.

# Laboratory

- Start the postgresql server by running `service postgresql start`.

- Start the msfconsole and check the database status.

- Create a new workspace and import your nmap scan results. We can name it RDP for this example.

- Set globally the target IP with `setg RHOSTS $TARGET_IP`, do this for the RHOST option as well.

- We can start by using db_nmap to start scanning the target machine. Or you can import them from an external xlm nmap result file.

- Service: BadBlue 2.7. Exploit found: `exploit/windows/http/badblue_passthru`. Get access to the target machine with a meterpreter session. Set the meterpreter, reverse_tcp payload, to the x64 version for windows. Remember to set the target to the appropiate target version.

- Let's try local enumeration: `sysinfo`, `getuid`, `getprivs`. Consider the user you are currently logged in at, it should be NT AUTHORITY\SYSTEM.

- Now we will use the `post/windows/manage/enable_rdp` post exploitation module. Set the session to 1 and hit exploit. Confirm the succesful execution of the module by running a quick nmap scan `db_nmap -p 3389 $TARGET_IP`.

**Note**: In this case we are going to change the Administrator password to test the rdp connection. However, this is not a good idea as it is a clear sign of system compromise.

- From the meterpreter session pop a cmd prompt shell. Run `net user administrator hacker_123321` to change the password of the local administrator to hacker_123321.

- From another tab in the terminal, run xfreerdp `xfreerdp /u:administrator /p:hacker_123321 /v:$TARGET_IP`.

Flag: 763e1c86da26c66e86a8537fd343280d
