# Upgrading Command Shells to Meterpreter Shells

This is technical demostration only.

## Laboratory

- Start the postgresql server by running `service postgresql start`.

- Start the msfconsole and check the database status.

- Create a new workspace and import your nmap scan results. We can name it upgrading_shells for this example.

- Set globally the target IP with `setg RHOSTS $TARGET_IP`, do this for the RHOST option as well.

- We can start by using db_nmap to start scanning the target machine. Or you can import them from an external xlm nmap result file.

**Note**: The target machine is the next ip after your ip address. If your ip is x.x.x.2, the target IP will be x.x.x.3.

- We are going to try to get access to the samba server found in the nmap scan using `exploit/linux/samba/is_known_pipeline`. We will get access to a terminal where we can execute /bin/bash -i to start bash.

- Now we will send the session to the background and we are going to use the module `post/multi/manage/shell_to_meterpreter` to upgrade the shell to meterpreter.

- We can also perform this by using the `sessions` command `sessions -u $SESSION_ID`.
