# Post Exploitation Notes

- Remember that reverse shells are unstable, as they depend on other programs to keep alive the connection. Do what you are going to do fast or upgrade your connection to a more stable handler like multi/handler and a shell like meterpreter.

- History files in Linux and Windows are a good thing to check during the post-exploitation phase. History file in Windows can be found on: `C:\Users\$USER\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadline\` and it is called `ConsoleHost_history.txt`.

- Consider that as soon as you get RCE using a non conventional way like a web shell or through any other mean different from a reverse or bind shell, try to establish a shell connection as soon as posible.

- A good Privilege Escalation Module that you can use to enumerate some information is winPEASx64.exe for windows. Or PEAS in general.

- Once you have access to the machine through a shell in linux, the next step is to upgrade the terminal to a fully interactive tty. For this we can run the following commands:
    + From remote shell: `python -c "import pty;pty.spawn('/bin/bash')"`. In cases where python is not available, you can use `script /dev/null -c bash`. From here, you can check if you are in a tty by running `tty` and it should return tty /dev/pts/$NUMBER.
    + From remote shell: `export TERM=xterm` xterm is the default option and it works very well in any ocassion in linux.
    + Open a second terminal in your computer of the same size and run `stty -a`. Copy the values rows and columns and save it.
    + From remote shell: set rows and cols `stty rows $ROWS cols $COLS`.
    + Now from the remote shell press ctrl+z and execute `stty raw -echo`. And `fg` to return to the previous process. Restart the shell with `restart` or press enter.
