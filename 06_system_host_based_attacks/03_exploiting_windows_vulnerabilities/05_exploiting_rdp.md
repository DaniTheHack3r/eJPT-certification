# Exploiting RDP

We can always connect to RDP in a remote machine that is running windows. However, in order to exploit RDP in a target system, you have to posses a legitimate username and password in clear-text for that machine.

RDP port can be changed by the administrator in order to hide the available running rdp server. You always have to make sure if RDP is running in a different port.

# Laboratory

- Run a simple Nmap scan on the target. Run a scan in all ports to spot any out of place open connection.
- In order to identify an RDP server running, you can always try to connect to the open connection. However, in this case we will use MSF to identify and exploit RDP.
*Note*: remember to run `service postgresql start` before starting msfconsole.
- In this case we will use `auxiliary/scanner/rdp/rdp_scanner` to identify RDP on the target.
- Once identified, we will proceed to try to exploit RDP. In this case, we will start by performing a bruteforce attack using Hydra. We can use the following command `hydra -L /usr/share/metasploit-framework/data/wordlists/common_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt rdp://x.x.x.x -s $PORT`.
*Note*: Sometimes hydra is too agressive for the target system, we can lower the number of tasks using the -t flag. Default is 16.
- Once some credentials have been found, we want to test them out stablishing a connection. For this task, we can use xfreerdp like this: `xfreerdp /u:USERNAME /p:PASSWORD /v:HOST_IP:PORT`.
