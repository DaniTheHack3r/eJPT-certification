# Exploiting SSH

- SSH (Secure Shell) is a remote administration protocol that offers encryption and is the successor to Telnet.

- It is typically used for remote access to servers and systems.

- SSH uses TCP port 22 by default, however, like other services, it can be configured to use any other open TCP port.

- SSH authentication can be configured in two ways:
    + Username & password authentication
    + Key based authentication

- In the case of username and password authentication, we can perform a brute-force attack on the SSH server in order to identify legitimate credentials and consequently gain access to the target system.

**Note**: SSH can be configured to be secure. However, in some cases, small companies or individual might still configure their ssh access with username & password.

## Laboratory

In this laboratory you won't be provided with the target IP address, but you can take your own IP address in the subnet and use the machine in the next ip address. For example x.x.x.2 is your machine and x.x.x.3 is the target.

- Start by performing an nmap scan with service detection. You should see the ssh service running in port 22, OpenSSH version 7.9p1.

- Now we will use hydra to perform the brute force attack. `hydra -L /path/to/username/list -P /path/to/password/list x.x.x.x -t $THREADS $PROTOCOL` in this case the protocol is ssh.

**Note**: The lists recommended for this exercise are `/usr/share/metasploit-framework/data/wordlists/common_users.txt` for users and `/usr/share/metasploit-framework/data/wordlists/common_passwords.txt` for passwords.

**Note**: If you want to cancel a hydra brute force attack, the hydra session will be saved in a session file called hydra.restore. And running `hydra -R ./path/to/restore-file` you can always resume the hydra brute force attack from when you leave it.

- Now try logging in using the credentials you found using `ssh user@x.x.x.x` and you will be prompted to enter the password and perform a little bit of enumeration using `whoami`, `cat /etc/*issue`, `uname -a`, `groups @USERNAME` to get some more information about privileges and the machine.

**Note**: The sudo group or the root group are the ones you want to be part of in order to elevate your privileges.

Flag: eb09cc6f1cd72756da145892892fbf5a
